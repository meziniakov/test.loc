# Set the default charset.
AddDefaultCharset UTF-8

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

IndexIgnore */*

RewriteEngine On

# Various rewrite rules.

# Set "protossl" to "s" if we were accessed via https://. This is used later
# if you enable "www." stripping or enforcement, in order to ensure that
# you don't bounce between http and https.
RewriteRule ^ - [E=protossl]
RewriteCond %{HTTPS} on
RewriteRule ^ - [E=protossl:s]

# To redirect all users to access the site WITHOUT the 'www.' prefix,
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http%{ENV:protossl}://%1%{REQUEST_URI} [L,R=301]

#RewriteCond %{HTTP_HOST} ^(.+)\.test/? [NC]
#RewriteRule (.*) http://test.loc/$2/$1/ [L]

#RewriteCond %{HTTP_HOST} ^(.+)\.test.loc/? [NC]
#RewriteRule (.*) http://test.loc/$1/ [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php

<ifModule mod_deflate.c>
#AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xml application/xhtml+xml text/css text/javascript application/javascript application/x-javascript
</ifModule>
 
# кеш браузера
<ifModule mod_expires.c>
#ExpiresActive On
 
#по умолчанию кеш в 5 секунд
#ExpiresDefault "access plus 1 days"
 
# Включаем кэширование изображений и флэш на месяц
#ExpiresByType image/x-icon "access plus 1 month"
#ExpiresByType image/jpeg "access plus 4 weeks"
#ExpiresByType image/png "access plus 30 days"
#ExpiresByType image/gif "access plus 43829 minutes"
#ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
 
# Включаем кэширование css, javascript и текстовых файлов на одну неделю
#ExpiresByType text/css "access plus 604800 seconds"
#ExpiresByType text/javascript "access plus 604800 seconds"
#ExpiresByType application/javascript "access plus 604800 seconds"
#ExpiresByType application/x-javascript "access plus 604800 seconds"
 
# Включаем кэширование html и htm файлов на один день
#ExpiresByType text/html "access plus 43200 seconds"
 
# Включаем кэширование xml файлов на десять минут
#ExpiresByType application/xhtml+xml "access plus 600 seconds"
 
# Нестандартные шрифты сайта
#ExpiresByType application/x-font-ttf "access plus 1 month"
#ExpiresByType font/opentype "access plus 1 month"
#ExpiresByType application/x-font-woff "access plus 1 month"
#ExpiresByType image/svg+xml "access plus 1 month"
#ExpiresByType application/vnd.ms-fontobject "access plus 1 month"
</ifModule>